<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>AINA ‚Äì Pro Camera Web App</title>
<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,Arial;
  background:#020617;
  color:#fff;
}
header{
  text-align:center;
  padding:14px;
  font-size:20px;
  font-weight:800;
  letter-spacing:2px;
}
.app{
  max-width:430px;
  margin:auto;
  padding:10px;
}
video,canvas{
  width:100%;
  border-radius:14px;
  background:#000;
}
.controls{
  display:flex;
  gap:8px;
  margin-top:10px;
}
button,select{
  flex:1;
  padding:12px;
  border-radius:10px;
  border:none;
  font-weight:700;
}
button{background:#22c55e;cursor:pointer}
.secondary{background:#334155;color:#fff}
.filters{
  margin-top:10px;
  display:grid;
  gap:6px;
}
.status{
  text-align:center;
  font-size:12px;
  margin-top:6px;
  color:#93c5fd;
}
</style>
</head>
<body>
<header>üì∏ AINA</header>
<div class="app">

<video id="preview" autoplay playsinline></video>
<canvas id="canvas" hidden></canvas>

<div class="controls">
  <button id="photoBtn">üì∏ Photo</button>
  <button id="recordBtn" class="secondary">‚è∫ Record</button>
</div>

<div class="filters">
  <select id="resolution">
    <option value="1080">1080p 60fps</option>
    <option value="4k">4K 60fps</option>
  </select>

  <select id="filter">
    <option value="none">Normal</option>
    <option value="brightness(1.2) contrast(1.2)">HD Enhance</option>
    <option value="brightness(1.3) saturate(1.4)">Glow / Fair</option>
    <option value="contrast(1.5) saturate(1.2)">Sharp Pro</option>
  </select>
</div>

<div class="status" id="status">Initializing camera‚Ä¶</div>
</div>

<script>
const video = document.getElementById('preview');
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
const statusEl = document.getElementById('status');

let stream;
let recorder;
let chunks = [];
let recording = false;

async function startCamera(res="1080"){
  if(stream) stream.getTracks().forEach(t=>t.stop());

  const constraints = res==="4k" ?
  {video:{width:{ideal:3840},height:{ideal:2160},frameRate:{ideal:60}},audio:true} :
  {video:{width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:60}},audio:true};

  stream = await navigator.mediaDevices.getUserMedia(constraints);
  video.srcObject = stream;
  statusEl.innerText = `Camera ready (${res})`;
}

startCamera();

// filter
document.getElementById('filter').onchange=e=>{
  video.style.filter = e.target.value==='none'?'none':e.target.value;
};

// resolution change
document.getElementById('resolution').onchange=e=>{
  startCamera(e.target.value);
};

// photo capture
document.getElementById('photoBtn').onclick=()=>{
  const track = stream.getVideoTracks()[0].getSettings();
  canvas.width = track.width;
  canvas.height = track.height;
  ctx.filter = video.style.filter || 'none';
  ctx.drawImage(video,0,0,canvas.width,canvas.height);
  const link = document.createElement('a');
  link.download = `aina_${Date.now()}.png`;
  link.href = canvas.toDataURL('image/png',1.0);
  link.click();
};

// video recording
document.getElementById('recordBtn').onclick=()=>{
  if(!recording){
    chunks=[];
    recorder = new MediaRecorder(stream,{mimeType:'video/webm;codecs=vp9'});
    recorder.ondataavailable=e=>chunks.push(e.data);
    recorder.onstop=()=>{
      const blob = new Blob(chunks,{type:'video/webm'});
      const url = URL.createObjectURL(blob);
      const a=document.createElement('a');
      a.href=url;
      a.download=`aina_video_${Date.now()}.webm`;
      a.click();
    };
    recorder.start();
    recording=true;
    statusEl.innerText='Recording‚Ä¶';
    document.getElementById('recordBtn').innerText='‚èπ Stop';
  }else{
    recorder.stop();
    recording=false;
    statusEl.innerText='Saved';
    document.getElementById('recordBtn').innerText='‚è∫ Record';
  }
};
</script>
</body>
</html>
